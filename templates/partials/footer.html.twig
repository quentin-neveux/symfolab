{# ============================================================
   FOOTER ECORIDE â€” version Symfony + Easter Egg Aim Trainer
   FidÃ¨le Ã  la V2 : minimaliste, Ã©lÃ©gant, responsive
   ============================================================ #}

<footer class="footer-ecoride mt-auto py-4">
  <div class="container">
    <div class="row align-items-center justify-content-between text-center text-md-start">
      
      <!-- Bloc gauche : logo + texte -->
      <div class="col-md-6 mb-3 mb-md-0">
        <h5 class="footer-brand mb-2">
          <a href="{{ path('app_home') }}" class="text-decoration-none">EcoRide</a>
        </h5>
        <hr class="footer-divider d-md-none">
        <p class="small mb-0 text-light opacity-75">
          Â© 2025 <span class="">EcoRide</span> â€” Quentin Neveux<br>
          Tous droits rÃ©servÃ©s.
        </p>
      </div>

      <!-- Bloc droit : rÃ©seaux sociaux + bouton -->
      <div class="col-md-6 text-center text-md-end">
        <div class="d-flex flex-column flex-md-row align-items-center justify-content-center justify-content-md-end gap-3">

          <!-- Bouton contact -->
          <a href="{{ path('app_contact') }}" class="btn btn-contact-footer px-3 py-2">
            Contactez-nous !
          </a>

          <!-- IcÃ´nes sociales + secret -->
          <div class="d-flex justify-content-center justify-content-md-end align-items-center gap-3">
            <a href="#" class="social-link" aria-label="Facebook"><i class="bi bi-facebook"></i></a>
            <a href="#" class="social-link" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
            <a href="#" class="social-link" aria-label="Twitter"><i class="bi bi-twitter-x"></i></a>
            <a href="#" class="social-link" aria-label="LinkedIn"><i class="bi bi-linkedin"></i></a>

            {# ðŸŒ¿ Logo secret EcoRide : Easter Egg Aim Trainer #}
            <img src="{{ asset('assets/images/eco-leaf.png') }}"
                 id="eco-secret-logo"
                 alt="Eco secret"
                 title="ðŸŒ¿"
                 width="22"
                 height="22"
            />
          </div>

        </div>
      </div>
    </div>
  </div>
</footer>

<!-- === POPUP ECO AIMLAB === -->
<div id="aimlab-popup">
  <div class="popup-content">
    <button id="close-popup">&times;</button>
    <iframe src="/aimlab.html" title="Eco Aim Trainer"></iframe>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const leaf = document.getElementById('eco-secret-logo');
    const popup = document.getElementById('aimlab-popup');
    const closeBtn = document.getElementById('close-popup');
    const iframe = popup ? popup.querySelector('iframe') : null;

    if (leaf && popup && closeBtn && iframe) {
      // ðŸ‘‰ Ouvrir la popup
      leaf.addEventListener('click', (e) => {
        e.preventDefault();
        // Recharge Ã  chaque ouverture pour Ã©viter le cache navigateur
        iframe.src = '/aimlab.html?reload=' + new Date().getTime();
        popup.style.display = 'flex';
      });

      // âŒ Fermer la popup + reset complet du jeu
      closeBtn.addEventListener('click', () => {
        popup.style.display = 'none';
        // Supprime la source de l'iframe (purge mÃ©moire et cache)
        iframe.src = 'about:blank';
      });
    }
  });
</script>
