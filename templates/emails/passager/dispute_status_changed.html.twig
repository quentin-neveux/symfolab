{% extends 'emails/_layout.html.twig' %}

{% block body %}
  <h2 style="margin:0 0 12px; font-size:20px; line-height:1.3; color:#1f7a4f;">
    Mise à jour de ton signalement
  </h2>

  <p style="margin:0 0 14px;">
    Bonjour {{ user.prenom ?? user.email }},
  </p>

  <p style="margin:0 0 14px;">
    Le statut de ton signalement <strong>#{{ dispute.id }}</strong> a été mis à jour.
  </p>

  {% set st = dispute.status %}
  {% set badgeStyle =
      st == 'OPEN'
        ? 'background:#dc3545;color:#fff;'
        : st == 'IN_REVIEW'
          ? 'background:#ffc107;color:#111;'
          : st == 'RESOLVED'
            ? 'background:#198754;color:#fff;'
            : st == 'REJECTED'
              ? 'background:#212529;color:#fff;'
              : 'background:#6c757d;color:#fff;'
  %}

  <div style="padding:14px; border:1px solid #e6e6e6; border-radius:12px; background:#fafafa; margin:16px 0;">
    <p style="margin:0 0 10px;">
      <strong>Nouveau statut :</strong>
      <span style="display:inline-block; padding:3px 10px; border-radius:999px; font-size:12px; {{ badgeStyle }}">
        {{ st }}
      </span>
    </p>

    <p style="margin:0; color:#666;">
      Trajet concerné : <strong>{{ trajet.villeDepart }} → {{ trajet.villeArrivee }}</strong> (trajet #{{ trajet.id }})
    </p>
  </div>

  <p style="margin:0;">
    <a href="{{ trajetUrl }}"
       style="display:inline-block; padding:10px 16px; border-radius:999px; text-decoration:none; background:#1f7a4f; color:#fff; font-weight:bold;">
      Voir le trajet
    </a>
  </p>
{% endblock %}
