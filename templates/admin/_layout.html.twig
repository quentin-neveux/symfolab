{% extends 'base.html.twig' %}

{% block body %}

{% set currentRoute = app.request.attributes.get('_route') %}
{% set currentRole  = app.request.query.get('role') %}

{# =========================================================
   HEADER ADMIN / EMPLOYÉ
========================================================= #}

{% set currentRoute = currentRoute is defined ? currentRoute : app.request.attributes.get('_route') %}
{% set currentRole  = currentRole  is defined ? currentRole  : app.request.get('role') %}

<div class="admin-layout border-bottom">
  <div class="container py-4">

    <h1 class="mb-3 text-success fw-bold">
      Dashboard EcoRide
    </h1>

    <div class="d-flex flex-wrap gap-2">

      {# DASHBOARD #}
      <a href="{{ path('admin_dashboard') }}"
         class="btn rounded-pill px-3 {{ currentRoute starts with 'admin_dashboard' ? 'btn-success text-white' : 'btn-outline-success' }}">
        Dashboard
      </a>

      {# UTILISATEURS #}
      <a href="{{ path('admin_users_index') }}"
         class="btn rounded-pill px-3 {{ (currentRoute starts with 'admin_users') and (currentRole != 'admin') ? 'btn-success text-white' : 'btn-outline-success' }}">
        Utilisateurs
      </a>

      {# TRAJETS #}
      <a href="{{ path('admin_trajets_index') }}"
         class="btn rounded-pill px-3 {{ currentRoute starts with 'admin_trajets' ? 'btn-success text-white' : 'btn-outline-success' }}">
        Trajets
      </a>

      {# TOKENS #}
      <a href="{{ path('admin_tokens_index') }}"
         class="btn rounded-pill px-3 {{ (currentRoute starts with 'admin_tokens') and (not (currentRoute starts with 'admin_tokens_history')) ? 'btn-success text-white' : 'btn-outline-success' }}">
        Tokens
      </a>

      {# HISTORIQUE TOKENS #}
      <a href="{{ path('admin_tokens_history') }}"
         class="btn rounded-pill px-3 {{ currentRoute starts with 'admin_tokens_history' ? 'btn-success text-white' : 'btn-outline-success' }}">
        Historique
      </a>

      {# ADMINS #}
      <a href="{{ path('admin_users_index', { role: 'admin' }) }}"
         class="btn rounded-pill px-3 {{ (currentRoute starts with 'admin_users') and (currentRole == 'admin') ? 'btn-success text-white' : 'btn-outline-success' }}">
        Admins
      </a>

      {# SIGNALEMENTS #}
      <a href="{{ path('admin_dispute_list') }}"
         class="btn rounded-pill px-3 {{ currentRoute starts with 'admin_dispute' ? 'btn-danger' : 'btn-outline-danger' }}">
        ⚠ Signalements
      </a>

    </div>
  </div>
</div>

{# =========================================================
   CONTENU ADMIN
========================================================= #}
<div class="container py-5">
    {% block admin_content %}{% endblock %}
</div>

{% endblock %}
