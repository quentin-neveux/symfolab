{% extends 'base.html.twig' %}

{% block body %}
<div class="container py-5">
<div class="d-flex justify-content-center mb-4">
    <a href="{{ path('admin_dashboard') }}" class="btn btn-ecoride rounded-pill px-4 py-2">
        ⌫ Retour au Dashboard
    </a>
</div>

  <h2 class="mb-4">Gestion des utilisateurs</h2>

  <table class="table table-hover align-middle">
    <thead>
  <tr>
    <th>{{ knp_pagination_sortable(users, 'ID', 'u.id') }}</th>
    <th>{{ knp_pagination_sortable(users, 'Prénom', 'u.prenom') }}</th>
    <th>{{ knp_pagination_sortable(users, 'Email', 'u.email') }}</th>
    <th>Rôles</th>
    <th>Actions</th>
  </tr>
</thead>


    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.prenom ?? '-' }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.roles|join(', ') }}</td>
        <td>{{ user.tokens }}</td>
        <td>
          <a href="{{ path('admin_users_edit', {id: user.id}) }}" class="btn btn-sm btn-warning">Modifier</a>
          <a href="{{ path('admin_users_delete', {id: user.id}) }}" class="btn btn-sm btn-danger">Supprimer</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- PAGINATION -->
  <div class="d-flex justify-content-center mt-4">
    {{ knp_pagination_render(users) }}
  </div>

</div>
{% endblock %}

