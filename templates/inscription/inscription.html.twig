{% extends 'base.html.twig' %}

{% block title %}Inscription - EcoRide{% endblock %}

{% block body %}

<!-- HERO -->
<section class="hero-global hero-inscription d-flex align-items-center text-center text-white position-relative">
  <div class="container">
    <h2 class="hero-title mb-3 text-white">Inscription</h2>
    <p class="hero-tagline mb-4 text-white">Rejoins la communauté EcoRide !</p>
  </div>
</section>

<!-- FORMULAIRE -->
<section class="connexion-section py-5 bg-ecoride-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">

        <div class="ecoride-form bg-white shadow p-4 rounded-4">

          <div class="text-center mb-4">
            <h2 class="fw-bold text-eco-primary">Créer un compte</h2>
            <p class="text-muted">C’est rapide, gratuit et éco-responsable</p>
          </div>

          {{ form_start(registrationForm, { attr: { class: 'eco-form' } }) }}
          {{ form_errors(registrationForm) }}

          {{ form_row(registrationForm.prenom, {
            row_attr: { class: 'mb-3' },
            attr: { class: 'eco-input', placeholder: 'Ex : Jean' }
          }) }}

          {{ form_row(registrationForm.nom, {
            row_attr: { class: 'mb-3' },
            attr: { class: 'eco-input', placeholder: 'Ex : Dupont' }
          }) }}

          {{ form_row(registrationForm.email.first, {
            row_attr: { class: 'mb-3' },
            attr: { class: 'eco-input', placeholder: 'exemple@domaine.fr' }
          }) }}

          {{ form_row(registrationForm.email.second, {
            row_attr: { class: 'mb-3' },
            attr: { class: 'eco-input', placeholder: 'Répétez votre adresse e-mail' }
          }) }}

          <!-- MOT DE PASSE -->
          <div class="mb-3 position-relative">
            {{ form_label(registrationForm.plainPassword.first) }}

            <div class="eco-input-wrapper">
              {{ form_widget(registrationForm.plainPassword.first, {
                attr: {
                  class: 'eco-input password-input',
                  placeholder: 'Entrez votre mot de passe'
                }
              }) }}

              <button type="button"
                      class="toggle-password"
                      data-target="{{ registrationForm.plainPassword.first.vars.id }}">
                <i class="bi bi-eye-slash"></i>
              </button>
            </div>
          </div>

          <!-- CONFIRMATION MOT DE PASSE -->
          <div class="mb-3 position-relative">
            {{ form_label(registrationForm.plainPassword.second) }}

            <div class="eco-input-wrapper">
              {{ form_widget(registrationForm.plainPassword.second, {
                attr: {
                  class: 'eco-input password-input',
                  placeholder: 'Répétez votre mot de passe'
                }
              }) }}

              <button type="button"
                      class="toggle-password"
                      data-target="{{ registrationForm.plainPassword.second.vars.id }}">
                <i class="bi bi-eye-slash"></i>
              </button>
            </div>
          </div>

          {# =============================
             CONDITIONS GÉNÉRALES ALIGNÉES
             ============================= #}
          <div class="mb-3 d-flex justify-content-center">
            <div class="form-check d-flex align-items-center gap-2 mb-0">
              {{ form_widget(registrationForm.agreeTerms, {
                attr: { class: 'form-check-input' }
              }) }}

              <label class="form-check-label mb-0" for="{{ registrationForm.agreeTerms.vars.id }}">
                J’accepte les
                <a href="{{ path('app_cgu') }}" target="_blank">
                  conditions générales
                </a>
              </label>
            </div>
          </div>

          {{ form_errors(registrationForm.agreeTerms) }}

          <button type="submit" class="btn btn-ecoride w-100 submit-loader-btn mb-3">
            Créer un compte
          </button>

          <section class="mb-3">
            <div class="alert alert-success mb-3 text-align-center" role="alert">
              <strong>Important</strong>: Recevez 20 EcoCrédits <strong>ECR</strong> dès votre inscription
            </div>
          </section>

          {{ form_end(registrationForm) }}

        </div>

      </div>
    </div>
  </div>
</section>

{% endblock %}
